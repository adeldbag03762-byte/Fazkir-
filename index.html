<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙØ°ÙƒÙ‘Ø± - Ø¹Ø¨Ø¯ Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø­Ù„Ø¨ÙŠ</title>
    <style>
        :root { --gold: #d4af37; --bg: #050505; --card: #121212; }
        body { margin: 0; background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; text-align: center; }
        .container { padding: 15px; max-width: 600px; margin: auto; }
        h1 { font-size: 2.5em; color: var(--gold); margin: 10px 0; }
        .dev-tag { color: var(--gold); border: 1px solid var(--gold); padding: 5px 15px; border-radius: 20px; font-size: 0.8em; margin-bottom: 20px; display: inline-block; }
        .main-menu { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .m-btn { background: var(--card); border: 1px solid rgba(212,175,55,0.3); padding: 20px; border-radius: 15px; cursor: pointer; color: #fff; font-weight: bold; font-size: 1.1em; }
        #screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 10000; flex-direction: column; }
        .header { background: #111; padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--gold); position: sticky; top: 0; }
        .view-area { flex-grow: 1; overflow-y: auto; padding: 15px; text-align: right; }
        .close-btn { background: var(--gold); border: none; padding: 8px 15px; border-radius: 8px; font-weight: bold; cursor: pointer; color: #000; }
        .item-card { background: var(--card); border-right: 4px solid var(--gold); padding: 15px; border-radius: 12px; margin-bottom: 15px; line-height: 1.8; font-size: 1.1em; }
        .tasbih { display: flex; justify-content: space-between; align-items: center; margin-top: 15px; background: #000; padding: 10px; border-radius: 8px; direction: ltr; }
        iframe { width: 100%; height: 100%; border: none; }
        .loading { color: var(--gold); padding: 20px; font-style: italic; }
    </style>
</head>
<body>

<div class="container">
    <h1>ÙØ°ÙƒÙ‘Ø±</h1>
    <div class="dev-tag">Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØªØ·ÙˆÙŠØ±: Ø¹Ø¨Ø¯ Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø­Ù„Ø¨ÙŠ</div>
    
    <div style="background:var(--card); padding:15px; border-radius:12px; margin-bottom:15px; border:1px solid var(--gold);">
        <div id="p-msg" style="color:var(--gold); font-weight:bold;">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©...</div>
        <div id="times" style="display:flex; justify-content:space-around; font-size:0.85em; margin-top:10px;">
            <span>ÙØ¬Ø±: <b id="f1">-</b></span> <span>Ø¸Ù‡Ø±: <b id="d1">-</b></span> <span>Ø¹ØµØ±: <b id="a1">-</b></span> <span>Ù…ØºØ±Ø¨: <b id="m1">-</b></span> <span>Ø¹Ø´Ø§Ø¡: <b id="i1">-</b></span>
        </div>
    </div>

    <div class="main-menu">
        <div class="m-btn" onclick="loadContent('morning')">â˜€ï¸ Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</div>
        <div class="m-btn" onclick="loadContent('evening')">ğŸŒ™ Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡</div>
        <div class="m-btn" onclick="loadContent('sleep')">ğŸ˜´ Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù†ÙˆÙ…</div>
        <div class="m-btn" onclick="loadContent('hadith')">ğŸ“œ 50 Ø­Ø¯ÙŠØ«Ø§Ù‹</div>
        <div class="m-btn" onclick="openQuran()" style="grid-column: span 2; background: #1a1a1a;">ğŸ“– Ø§Ù„Ù…ØµØ­Ù ÙˆØ§Ù„ØªÙØ³ÙŠØ±</div>
    </div>
</div>

<div id="screen">
    <div class="header"><span id="stitle" style="color:var(--gold); font-weight:bold;"></span><button class="close-btn" onclick="closeMe()">Ø±Ø¬ÙˆØ¹ âœ•</button></div>
    <div class="view-area" id="sbody"></div>
</div>

<audio id="adhan" src="https://www.islamcan.com/common/adhan/adhan1.mp3"></audio>

<script>
// Ø¬Ù„Ø¨ Ø§Ù„Ø¢Ø°Ø§Ù† Ø­Ø³Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹
async function getPrayers() {
    try {
        const r = await fetch('https://api.aladhan.com/v1/timingsByCity?city=Aleppo&country=Syria&method=4');
        const d = await r.json();
        const t = d.data.timings;
        document.getElementById('f1').innerText = t.Fajr;
        document.getElementById('d1').innerText = t.Dhuhr;
        document.getElementById('a1').innerText = t.Asr;
        document.getElementById('m1').innerText = t.Maghrib;
        document.getElementById('i1').innerText = t.Isha;
        document.getElementById('p-msg').innerText = "Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„Ø¢Ø°Ø§Ù† Ù„Ù„ÙŠÙˆÙ… (Ø­Ù„Ø¨)";
        
        setInterval(() => {
            const now = new Date();
            const cur = now.getHours().toString().padStart(2,'0')+":"+now.getMinutes().toString().padStart(2,'0');
            if([t.Fajr, t.Dhuhr, t.Asr, t.Maghrib, t.Isha].includes(cur)) document.getElementById('adhan').play();
        }, 60000);
    } catch(e) { document.getElementById('p-msg').innerText = "ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ù„Ù„Ù…ÙˆØ§Ù‚ÙŠØª"; }
}
getPrayers();

// Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø°ÙƒØ§Ø± ÙˆØ§Ù„Ø£Ø­Ø§Ø¯ÙŠØ« ÙƒØ§Ù…Ù„Ø© (Ø§Ù„Ù€ 50 Ø­Ø¯ÙŠØ«Ø§Ù‹) Ù…Ù† Ù…ØµØ¯Ø± Ø®Ø§Ø±Ø¬ÙŠ Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ù†Ù‚ØµÙ‡Ø§
async function loadContent(type) {
    const body = document.getElementById('sbody');
    const screen = document.getElementById('screen');
    const stitle = document.getElementById('stitle');
    
    screen.style.display = 'flex';
    body.innerHTML = '<div class="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒØ§Ù…Ù„ (50 Ø­Ø¯ÙŠØ«Ø§Ù‹)...</div>';
    
    const titles = {morning:'Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­', evening:'Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡', sleep:'Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù†ÙˆÙ…', hadith:'Ø§Ù„Ø£Ø±Ø¨Ø¹ÙˆÙ† Ø§Ù„Ù†ÙˆÙˆÙŠØ© ÙˆØªØªÙ…Ø© Ø§Ù„Ø®Ù…Ø³ÙŠÙ†'};
    stitle.innerText = titles[type];

    let url = '';
    if(type === 'hadith') url = 'https://api.jsonbin.io/v3/b/65cdfb30dc74654018b3f46c?meta=false'; // Ø±Ø§Ø¨Ø· Ø®Ø§Ø±Ø¬ÙŠ Ù„Ù„Ø£Ø­Ø§Ø¯ÙŠØ« Ø§Ù„Ù€ 50 ÙƒØ§Ù…Ù„Ø©
    else url = `https://hisnmuslim.com/api/ar/${type==='morning'?'27':type==='evening'?'28':'31'}.json`;

    try {
        const res = await fetch(url);
        const data = await res.json();
        const list = type === 'hadith' ? data : data[Object.keys(data)[0]];
        
        let html = "";
        list.forEach((x, i) => {
            let text = type === 'hadith' ? x.text : x.ARABIC_TEXT;
            let count = type === 'hadith' ? 1 : (parseInt(x.REPEAT) || 1);
            html += `<div class="item-card"><div>${text}</div>
            <div class="tasbih"><button class="close-btn" style="color:#000" onclick="cnt('${i}',${count})">Ø³Ø¨Ù‘Ø­</button>
            <span id="c${i}" style="color:var(--gold); font-weight:bold;">0 / ${count}</span></div></div>`;
        });
        body.innerHTML = html;
    } catch(e) { body.innerHTML = '<div class="loading">ØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</div>'; }
}

function openQuran() {
    document.getElementById('screen').style.display = 'flex';
    document.getElementById('stitle').innerText = "Ø§Ù„Ù…ØµØ­Ù Ø§Ù„Ø´Ø±ÙŠÙ";
    document.getElementById('sbody').innerHTML = '<iframe src="https://quran.com/1?translations=161"></iframe>';
}

function cnt(id, m) {
    let e = document.getElementById('c'+id);
    let v = parseInt(e.innerText.split(' / ')[0]);
    if(v < m) { e.innerText = (v+1) + " / " + m; if(navigator.vibrate) navigator.vibrate(40); }
}
function closeMe() { document.getElementById('screen').style.display='none'; }
</script>
</body>
</html>
