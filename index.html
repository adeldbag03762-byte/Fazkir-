<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ·Ø¨ÙŠÙ‚ ÙØ°ÙƒÙ‘Ø± - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„</title>
    <style>
        :root {
            --gold: #d4af37;
            --dark: #0a0a0a;
            --glass: rgba(255, 255, 255, 0.07);
        }
        body {
            margin: 0; background: var(--dark); color: #fff;
            font-family: 'Segoe UI', sans-serif; text-align: center;
            background-image: radial-gradient(circle at top, #1a1a1a, #000);
        }
        .container { padding: 20px; max-width: 500px; margin: auto; }
        .card {
            background: var(--glass); border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 30px; padding: 20px; backdrop-filter: blur(10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.5); margin-top: 50px;
        }
        h1 { background: linear-gradient(to bottom, #f9df7b, #aa8a2e); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 2.5em; margin: 10px; }
        
        .prayer-table { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 20px 0; }
        .p-item { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 15px; border: 1px solid rgba(212,175,55,0.1); }
        .p-item div { color: var(--gold); font-size: 0.8em; }

        .btn {
            background: linear-gradient(135deg, #d4af37, #aa8a2e); color: #000;
            border: none; padding: 15px; border-radius: 15px; width: 100%;
            margin: 8px 0; font-weight: bold; cursor: pointer; font-size: 1em;
        }
        .compass-box { margin: 20px 0; padding: 15px; border: 1px dashed var(--gold); border-radius: 20px; }
        #display-frame { display: none; width: 100%; height: 400px; border: 2px solid var(--gold); border-radius: 20px; margin-top: 15px; }
        
        #reminder-top { position: fixed; top: 0; width: 100%; background: var(--gold); color: #000; padding: 8px; font-weight: bold; z-index: 100; }
    </style>
</head>
<body>

<div id="reminder-top">Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡</div>

<div class="container">
    <div class="card">
        <h1>ÙØ°ÙƒÙ‘Ø±</h1>
        <p>Ø¬Ø§Ù…Ø¹ Ø®Ø§Ù„Ø¯ Ø¨Ù† Ø§Ù„ÙˆÙ„ÙŠØ¯ - Ø­Ù„Ø¨</p>

        <div class="prayer-table" id="prayers">
            <div class="p-item"><div>Ø§Ù„ÙØ¬Ø±/Ø§Ù„Ø¥Ù…Ø³Ø§Ùƒ</div><span id="fajr">--:--</span></div>
            <div class="p-item"><div>Ø§Ù„Ø¸Ù‡Ø±</div><span id="dhuhr">--:--</span></div>
            <div class="p-item"><div>Ø§Ù„Ø¹ØµØ±</div><span id="asr">--:--</span></div>
            <div class="p-item"><div>Ø§Ù„Ù…ØºØ±Ø¨/Ø§Ù„Ø¥ÙØ·Ø§Ø±</div><span id="maghrib">--:--</span></div>
            <div class="p-item"><div>Ø§Ù„Ø¹Ø´Ø§Ø¡</div><span id="isha">--:--</span></div>
            <div class="p-item"><div>Ø§Ù„Ù‚Ø¨Ù„Ø©</div><span id="qibla_deg">--</span></div>
        </div>

        <div class="compass-box">
            ğŸ§­ <b>Ø§Ù„Ø¨ÙˆØµÙ„Ø©:</b> ÙˆØ¬Ù‡ Ù‡Ø§ØªÙÙƒ Ù„Ù„Ù‚Ø¨Ù„Ø© <br>
            <small id="dir">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ¯...</small>
        </div>

        <button class="btn" onclick="showContent('quran')">ğŸ“– Ø§Ù„Ù…ØµØ­Ù ÙˆØ§Ù„ØªÙØ³ÙŠØ±</button>
        <button class="btn" onclick="showContent('azkar')">âœ¨ Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­ ÙˆØ§Ù„Ù…Ø³Ø§Ø¡</button>
        <button class="btn" onclick="startTasbih()">ğŸ“¿ Ø§Ù„Ø³Ø¨Ø­Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©: <span id="t-count">0</span></button>
        
        <iframe id="display-frame"></iframe>

        <div style="margin-top:20px; font-size:0.7em; color:var(--gold)">ØªØµÙ…ÙŠÙ… ÙˆØªØ·ÙˆÙŠØ±: Ø¹Ø¨Ø¯ Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ø­Ù„Ø¨ÙŠ</div>
    </div>
</div>

<script>
    // 1. Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
    if ("Notification" in window) {
        Notification.requestPermission();
    }

    // 2. Ø¬Ù„Ø¨ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© Ù„Ø³ÙˆØ±ÙŠØ§ (Ø­Ù„Ø¨ ÙƒÙ…Ø«Ø§Ù„)
    async function getPrayers() {
        try {
            const res = await fetch('https://api.aladhan.com/v1/timingsByCity?city=Aleppo&country=Syria&method=4');
            const data = await res.json();
            const t = data.data.timings;
            document.getElementById('fajr').innerText = t.Fajr;
            document.getElementById('dhuhr').innerText = t.Dhuhr;
            document.getElementById('asr').innerText = t.Asr;
            document.getElementById('maghrib').innerText = t.Maghrib;
            document.getElementById('isha').innerText = t.Isha;
            document.getElementById('qibla_deg').innerText = "Ù…ÙƒØ© 195Â°";
        } catch (e) { console.log("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„"); }
    }
    getPrayers();

    // 3. Ø§Ù„Ø³Ø¨Ø­Ø©
    let tCount = 0;
    function startTasbih() {
        tCount++;
        document.getElementById('t-count').innerText = tCount;
        if (window.navigator.vibrate) window.navigator.vibrate(50);
    }

    // 4. Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ (Ù…ØµØ­Ù / Ø£Ø°ÙƒØ§Ø±)
    function showContent(type) {
        const frame = document.getElementById('display-frame');
        frame.style.display = 'block';
        if (type === 'quran') {
            frame.src = "https://quran.com/1"; // Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ØµØ­Ù Ù…Ø¹ Ø§Ù„ØªÙØ³ÙŠØ±
        } else {
            frame.src = "https://www.hisnmuslim.com/i/ar/1"; // Ø±Ø§Ø¨Ø· Ø£Ø°ÙƒØ§Ø± Ø­ØµÙ† Ø§Ù„Ù…Ø³Ù„Ù…
        }
    }

    // 5. Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (ÙŠØ¹Ù…Ù„ ÙƒÙ„ ÙØªØ±Ø©)
    const thikrList = ["Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡", "Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡", "Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡", "Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±", "Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡"];
    setInterval(() => {
        let randomThikr = thikrList[Math.floor(Math.random() * thikrList.length)];
        document.getElementById('reminder-top').innerText = randomThikr;
        
        if (Notification.permission === "granted") {
            new Notification("ÙØ°ÙƒÙ‘Ø±", { body: randomThikr, icon: "https://cdn-icons-png.flaticon.com/512/2664/2664831.png" });
        }
    }, 1800000); // ØªÙ†Ø¨ÙŠÙ‡ ÙƒÙ„ 30 Ø¯Ù‚ÙŠÙ‚Ø©

    // 6. Ø§Ù„Ø£Ø°Ø§Ù† Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (ØªØ¬Ø±ÙŠØ¨ÙŠ)
    function checkAzanTime() {
        const now = new Date();
        const currentTime = now.getHours() + ":" + now.getMinutes();
        // Ù‡Ù†Ø§ ÙŠØªÙ… Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø© ÙˆØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª
        // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ù…ØªØµÙØ­Ø§Øª ØªØ·Ù„Ø¨ Ø¶ØºØ·Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¢Ù„ÙŠØ§Ù‹
    }
    
    // Ø§Ù„Ø¨ÙˆØµÙ„Ø© (ØªØ­ØªØ§Ø¬ Ø­Ø³Ø§Ø³Ø§Øª Ø§Ù„Ù‡Ø§ØªÙ)
    window.addEventListener('deviceorientation', function(event) {
        if(event.webkitCompassHeading) {
            let heading = event.webkitCompassHeading;
            document.getElementById('dir').innerText = "Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø­Ø§Ù„ÙŠ: " + Math.round(heading) + "Â°";
        }
    });
</script>
</body>
</html>
